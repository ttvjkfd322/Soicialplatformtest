<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#121212" />
  <title>Gtok ğŸŒ¸ Social Site</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- === ADMIN DASHBOARD === -->
  <section id="tab-admin" class="tab-page">
    <h2>ğŸ› ï¸ Admin Dashboard</h2>
    <p>Welcome, Admin! Here you can manage users and posts.</p>

    <div id="admin-users" style="margin-top: 2rem;">
      <h3>ğŸ‘¥ Users</h3>
      <ul id="admin-user-list"></ul>
    </div>

    <div id="admin-posts" style="margin-top: 2rem;">
      <h3>ğŸ“ All Posts</h3>
      <ul id="admin-post-list"></ul>
    </div>
  </section>

  <!-- === Navigation Tabs === -->
  <nav id="main-nav">
    <!-- Add this with the other nav buttons -->
    <button class="tab-btn" data-tab="admin">ğŸ› ï¸ Admin</button>
    <button class="tab-btn active" data-tab="home">ğŸ  Home</button>
    <button class="tab-btn" data-tab="trending">ğŸ”¥ Trending</button>
    <button class="tab-btn" data-tab="explore">ğŸŒ Explore</button>
    <button class="tab-btn" data-tab="rules">ğŸ“œ Rules</button>
    <button class="tab-btn" data-tab="play">ğŸ® Play</button>
    <button class="tab-btn" data-tab="livestreams">ğŸ¥ Livestreams</button>
  </nav>

  <!-- === HOME TAB === -->
  <section id="tab-home" class="tab-page active">
    <header>
      <h1>Gtok ğŸŒ¸ Social Site</h1>
      <div id="user-info" class="hidden">
        Logged in as <span id="username-display"></span>
        <button id="logout-btn">Logout</button>
      </div>
    </header>

    <main>
      <!-- === Login / Signup === -->
      <section id="auth-section">
        <div id="signup-form">
          <h2>Sign Up</h2>
          <input type="text" id="signup-username" placeholder="Username" />
          <input type="password" id="signup-password" placeholder="Password" />
          <button id="signup-btn">Sign Up</button>
        </div>

        <div id="login-form" style="margin-top: 2rem;">
          <h2>Login</h2>
          <input type="text" id="login-username" placeholder="Username" />
          <input type="password" id="login-password" placeholder="Password" />
          <button id="login-btn">Login</button>
        </div>
      </section>

      <!-- === AI Suggestions Section === -->
      <section id="improve-panel" style="margin-top: 3rem;">
        <h2>ğŸ§  Website Improvement Engine</h2>
        <div id="ai-insights">
          <p>Analyzing site usage...</p>
        </div>
        <button onclick="refreshInsights()">ğŸ”„ Refresh Insights</button>
      </section>

      <section id="ai-suggestions" style="margin-top: 3rem;">
        <h2>ğŸ¤– AI-Powered Suggestions</h2>
        <textarea id="ai-input" placeholder="Ask how to improve your site..." rows="3" style="width: 100%;"></textarea>
        <button onclick="askAI()">Ask AI</button>
        <pre id="ai-output" style="background: #1e1e1e; color: #eee; padding: 1rem; margin-top: 1rem; border-radius: 6px;"></pre>
      </section>

      <!-- === Post Creation === -->
      <section id="post-creation" class="hidden">
        <h2>Create Post</h2>
        <textarea id="post-text" rows="3" placeholder="What's on your mind?"></textarea>
        <button id="post-btn">Post</button>
      </section>

      <!-- === Posts Feed === -->
      <section id="feed-section" class="hidden">
        <h2>Feed</h2>
        <div id="posts-container"></div>
        <div id="notification-bar"></div>
      </section>

      <!-- === Vlog Recorder === -->
      <section id="vlog-recorder" style="margin-top: 3rem;">
        <h2>ğŸ¥ Record Your Vlog</h2>
        <video id="preview" autoplay muted playsinline style="width: 100%; max-width: 400px; background: black;"></video>
        <div style="margin-top: 1rem;">
          <button id="start-record">Start Recording</button>
          <button id="stop-record" disabled>Stop Recording</button>
        </div>
        <h3>Playback</h3>
        <video id="playback" controls style="width: 100%; max-width: 400px; background: black;"></video>
        <a id="download-link" style="display: none; margin-top: 0.5rem;">Download Video</a>
      </section>
    </main>
  </section>

  <!-- === TRENDING TAB === -->
  <section id="tab-trending" class="tab-page">
    <h2>ğŸ”¥ Trending Posts</h2>
    <div id="trending-posts"></div>
  </section>

  <!-- === EXPLORE TAB === -->
  <section id="tab-explore" class="tab-page">
    <h2>ğŸŒ Explore New Content</h2>
    <p>Discover random posts and users!</p>
  </section>

  <!-- === RULES TAB === -->
  <section id="tab-rules" class="tab-page">
    <h2>ğŸ“œ Gtok Site Rules</h2>
    <ul>
      <li>Be kind and respectful to others</li>
      <li>No inappropriate or hateful content</li>
      <li>Keep posts relevant and fun</li>
      <li>No spamming or bot behavior</li>
      <li>Report issues to moderators</li>
    </ul>
  </section>

  <!-- === PLAY TAB === -->
  <section id="tab-play" class="tab-page">
    <h2>ğŸ® Mini Multiplayer Game</h2>
    <div id="game-area">
      <p>Waiting for another player...</p>
      <button id="join-game-btn">Join Game</button>
      <div id="game-status" style="margin-top: 1rem;"></div>
    </div>
  </section>

  <!-- === LIVESTREAMS TAB === -->
  <section id="tab-livestreams" class="tab-page">
    <h2>ğŸ¥ Upcoming Livestreams</h2>
    <p>Feature coming soon â€” schedule and join live sessions!</p>
  </section>

  <!-- === BOT CREATOR DASHBOARD === -->
  <section id="bot-dashboard" style="margin-top: 3rem; border-top: 1px solid #444; padding-top: 1rem; max-width: 600px; width: 100%;">
    <h2>ğŸ¤– Discord Bot Creator</h2>
    <textarea id="bot-code" placeholder="Write your bot script here..." rows="8" style="width: 100%; background: #1e1e1e; color: #eee; border-radius: 6px; border: 1px solid #333; padding: 1rem; font-family: monospace;"></textarea>
    <button id="run-bot-btn" style="margin-top: 1rem;">Run Bot Script</button>
    <pre id="bot-output" style="background: #121212; color: #f44336; margin-top: 1rem; padding: 1rem; border-radius: 6px; height: 150px; overflow-y: auto;"></pre>
  </section>

  <!-- === Vlog Recorder Script === -->
  <script>
    const preview = document.getElementById('preview');
    const playback = document.getElementById('playback');
    const startBtn = document.getElementById('start-record');
    const stopBtn = document.getElementById('stop-record');
    const downloadLink = document.getElementById('download-link');

    let mediaRecorder;
    let recordedChunks = [];

    async function initCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        preview.srcObject = stream;

        mediaRecorder = new MediaRecorder(stream);

        mediaRecorder.ondataavailable = e => {
          if (e.data.size > 0) recordedChunks.push(e.data);
        };

        mediaRecorder.onstop = () => {
          const blob = new Blob(recordedChunks, { type: 'video/webm' });
          recordedChunks = [];

          playback.src = URL.createObjectURL(blob);
          downloadLink.href = playback.src;
          downloadLink.download = 'vlog.webm';
          downloadLink.style.display = 'inline-block';
          downloadLink.textContent = 'Download your video';
        };

        startBtn.disabled = false;
      } catch (err) {
        alert('Could not access your camera and microphone: ' + err.message);
        startBtn.disabled = true;
        stopBtn.disabled = true;
      }
    }

    startBtn.onclick = () => {
      recordedChunks = [];
      mediaRecorder.start();
      startBtn.disabled = true;
      stopBtn.disabled = false;
      downloadLink.style.display = 'none';
      playback.src = '';
    };

    stopBtn.onclick = () => {
      mediaRecorder.stop();
      startBtn.disabled = false;
      stopBtn.disabled = true;
    };

    initCamera();
  </script>

  <!-- === Main JS App === -->
  <script src="script.js"></script>
</body>
</html>