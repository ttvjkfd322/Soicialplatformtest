<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#121212" />
  <title>Gtok 🌸 Social Site</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- === Navigation Tabs === -->
  <nav id="main-nav">
    <button class="tab-btn active" data-tab="home">🏠 Home</button>
    <button class="tab-btn" data-tab="trending">🔥 Trending</button>
    <button class="tab-btn" data-tab="explore">🌐 Explore</button>
    <button class="tab-btn" data-tab="rules">📜 Rules</button>
    <button class="tab-btn" data-tab="play">🎮 Play</button>
    <button class="tab-btn" data-tab="livestreams">🎥 Livestreams</button>
    <button class="tab-btn" data-tab="admin">🛠️ Admin</button>
  </nav>

  <!-- === TABS === -->
  <section id="tab-home" class="tab-page active">
    <header>
      <h1>Gtok 🌸 Social Site</h1>
      <div id="user-info" class="hidden">
        Logged in as <span id="username-display"></span>
        <button id="logout-btn">Logout</button>
      </div>
    </header>

    <main>
      <!-- === Login / Signup === -->
      <section id="auth-section">
        <div id="signup-form">
          <h2>Sign Up</h2>
          <input type="text" id="signup-username" placeholder="Username" />
          <input type="password" id="signup-password" placeholder="Password" />
          <button id="signup-btn">Sign Up</button>
        </div>

        <div id="login-form" style="margin-top: 2rem;">
          <h2>Login</h2>
          <input type="text" id="login-username" placeholder="Username" />
          <input type="password" id="login-password" placeholder="Password" />
          <button id="login-btn">Login</button>
        </div>
      </section>

      <!-- === Post Creation === -->
      <section id="post-creation" class="hidden">
        <h2>Create Post</h2>
        <textarea id="post-text" rows="3" placeholder="What's on your mind?"></textarea>
        <button id="post-btn">Post</button>
      </section>

      <!-- === Feed === -->
      <section id="feed-section" class="hidden">
        <h2>Feed</h2>
        <div id="posts-container"></div>
        <div id="notification-bar"></div>
      </section>

      <!-- === AI Suggestions === -->
      <section id="ai-suggestions" style="margin-top: 3rem;">
        <h2>🤖 AI-Powered Suggestions</h2>
        <textarea id="ai-input" placeholder="Ask how to improve your site..." rows="3"></textarea>
        <button id="ask-ai-btn" onclick="askAI()">Ask AI</button>
        <pre id="ai-output"></pre>
      </section>

      <!-- === Vlog Recorder === -->
      <section id="vlog-recorder" style="margin-top: 3rem;">
        <h2>🎥 Record Your Vlog</h2>
        <video id="preview" autoplay muted playsinline></video>
        <div>
          <button id="start-record">Start Recording</button>
          <button id="stop-record" disabled>Stop Recording</button>
        </div>
        <video id="playback" controls></video>
        <a id="download-link" style="display: none;">Download Video</a>
      </section>
    </main>
  </section>

  <section id="tab-trending" class="tab-page">
    <h2>🔥 Trending Posts</h2>
    <div id="trending-posts"></div>
  </section>

  <section id="tab-explore" class="tab-page">
    <h2>🌐 Explore</h2>
    <div id="explore-posts"></div>
  </section>

  <section id="tab-rules" class="tab-page">
    <h2>📜 Site Rules</h2>
    <ul>
      <li>Be respectful</li>
      <li>No spam or hateful content</li>
    </ul>
  </section>

  <section id="tab-play" class="tab-page">
    <h2>🎮 Mini Games</h2>

    <!-- === Coin Flip === -->
    <div class="mini-game">
      <h3>🪙 Coin Flip</h3>
      <button onclick="flipCoin()">Flip Coin</button>
      <p id="coin-result"></p>
    </div>

    <!-- === Dice Roll === -->
    <div class="mini-game">
      <h3>🎲 Dice Roll</h3>
      <button onclick="rollDice()">Roll Dice</button>
      <p id="dice-result"></p>
    </div>

    <!-- === Rock Paper Scissors === -->
    <div class="mini-game">
      <h3>✊🖐✌ Rock Paper Scissors</h3>
      <button onclick="playRPS('rock')">Rock</button>
      <button onclick="playRPS('paper')">Paper</button>
      <button onclick="playRPS('scissors')">Scissors</button>
      <p id="rps-result"></p>
    </div>

    <!-- === 2-Player Turn Game === -->
    <div id="game-area">
      <h3>👥 Turn-Based Game</h3>
      <button id="join-game-btn">Join Game</button>
      <button onclick="startSinglePlayer()">1 Player Mode</button>
      <div id="game-status"></div>
    </div>
  </section>

  <section id="tab-livestreams" class="tab-page">
    <h2>🎥 Livestreams</h2>

    <!-- Livestream Video Player -->
    <div id="live-stream-player" style="background:#000; border-radius:8px; max-width: 600px; margin-bottom: 1rem;">
      <video id="live-video" controls autoplay muted playsinline style="width: 100%; border-radius: 8px;">
        Your browser does not support the video tag.
      </video>
    </div>

    <!-- Live Chat -->
    <div id="live-chat-container" style="max-width: 600px; background: #1e1e1e; border-radius: 8px; padding: 1rem; color: #eee;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
        <h3>💬 Live Chat</h3>
        <select id="chat-sort" aria-label="Sort chat messages" style="background:#222; color:#eee; border-radius:6px; padding:0.25rem 0.5rem; border:none;">
          <option value="oldest" selected>Sort by Oldest</option>
          <option value="newest">Sort by Newest</option>
        </select>
      </div>

      <div id="chat-messages" style="height: 300px; overflow-y: auto; border: 1px solid #444; border-radius: 6px; padding: 0.5rem; background: #121212; font-size: 0.9rem;">
        <!-- Chat messages will appear here -->
      </div>

      <form id="chat-form" style="margin-top: 0.5rem; display: flex; gap: 0.5rem;">
        <input
          type="text"
          id="chat-input"
          placeholder="Type your message..."
          autocomplete="off"
          required
          style="flex-grow: 1; padding: 0.5rem; border-radius: 6px; border: 1px solid #333; background: #222; color: #eee;"
        />
        <button type="submit" style="background: #f44336; border: none; border-radius: 6px; padding: 0 1rem; color: white; font-weight: 600;">Send</button>
      </form>

      <div style="margin-top: 0.5rem;">
        <label>
          <input type="checkbox" id="chat-notifications" checked />
          Enable Chat Notifications
        </label>
      </div>
    </div>
  </section>

  <section id="tab-admin" class="tab-page">
    <h2>🛠️ Admin Dashboard</h2>
    <ul id="admin-user-list"></ul>
    <ul id="admin-post-list"></ul>
  </section>

  <!-- === Bot Creator === -->
  <section id="bot-dashboard">
    <h2>🤖 Discord Bot Creator</h2>
    <textarea id="bot-code" rows="8"></textarea>
    <button id="run-bot-btn">Run Script</button>
    <pre id="bot-output"></pre>
  </section>

  <!-- === Recorder Script === -->
  <script>
    const preview = document.getElementById('preview');
    const playback = document.getElementById('playback');
    const startBtn = document.getElementById('start-record');
    const stopBtn = document.getElementById('stop-record');
    const downloadLink = document.getElementById('download-link');
    let mediaRecorder;
    let recordedChunks = [];

    async function initCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        preview.srcObject = stream;
        mediaRecorder = new MediaRecorder(stream);

        mediaRecorder.ondataavailable = e => {
          if (e.data.size > 0) recordedChunks.push(e.data);
        };

        mediaRecorder.onstop = () => {
          const blob = new Blob(recordedChunks, { type: 'video/webm' });
          recordedChunks = [];
          playback.src = URL.createObjectURL(blob);
          downloadLink.href = playback.src;
          downloadLink.download = 'vlog.webm';
          downloadLink.style.display = 'inline-block';
        };

        startBtn.disabled = false;
      } catch (err) {
        alert(err);
      }
    }

    startBtn.onclick = () => {
      recordedChunks = [];
      mediaRecorder.start();
      startBtn.disabled = true;
      stopBtn.disabled = false;
      downloadLink.style.display = 'none';
    };
    stopBtn.onclick = () => {
      mediaRecorder.stop();
      startBtn.disabled = false;
      stopBtn.disabled = true;
    };
    initCamera();
  </script>

  <!-- === Main App === -->
  <script src="script.js"></script>
</body>
</html>