<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SocialSite MVP</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>SocialSite ðŸŒ¸</h1>
    <div id="user-info" class="hidden">
      Logged in as <span id="username-display"></span>
      <button id="logout-btn">Logout</button>
    </div>
  </header>

  <main>
    <!-- Signup / Login forms -->
    <section id="auth-section">
      <div id="signup-form">
        <h2>Sign Up</h2>
        <input type="text" id="signup-username" placeholder="Username" />
        <input type="password" id="signup-password" placeholder="Password" />
        <button id="signup-btn">Sign Up</button>
      </div>

      <div id="login-form" style="margin-top: 2rem;">
        <h2>Login</h2>
        <input type="text" id="login-username" placeholder="Username" />
        <input type="password" id="login-password" placeholder="Password" />
        <button id="login-btn">Login</button>
      </div>
    </section>

    <!-- Post creation -->
    <section id="post-creation" class="hidden">
      <h2>Create Post</h2>
      <textarea id="post-text" rows="3" placeholder="What's on your mind?"></textarea>
      <button id="post-btn">Post</button>
    </section>

    <!-- Posts feed -->
    <section id="feed-section" class="hidden">
      <h2>Feed</h2>
      <div id="posts-container">
        <!-- Posts will appear here -->
      </div>
    </section>
  </main>
<section id="vlog-recorder">
  <h2>Record Your Vlog</h2>
  <video id="preview" autoplay muted playsinline style="width: 100%; max-width: 400px; background: black;"></video>
  <div style="margin-top: 1rem;">
    <button id="start-record">Start Recording</button>
    <button id="stop-record" disabled>Stop Recording</button>
  </div>
  <h3>Playback</h3>
  <video id="playback" controls style="width: 100%; max-width: 400px; background: black;"></video>
  <a id="download-link" style="display: none; margin-top: 0.5rem;">Download Video</a>
</section>

<script>
  const preview = document.getElementById('preview');
  const playback = document.getElementById('playback');
  const startBtn = document.getElementById('start-record');
  const stopBtn = document.getElementById('stop-record');
  const downloadLink = document.getElementById('download-link');

  let mediaRecorder;
  let recordedChunks = [];

  // Access webcam and show preview
  async function initCamera() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
      preview.srcObject = stream;

      mediaRecorder = new MediaRecorder(stream);

      mediaRecorder.ondataavailable = e => {
        if (e.data.size > 0) recordedChunks.push(e.data);
      };

      mediaRecorder.onstop = () => {
        const blob = new Blob(recordedChunks, { type: 'video/webm' });
        recordedChunks = [];

        // Show playback
        playback.src = URL.createObjectURL(blob);

        // Show download link
        downloadLink.href = playback.src;
        downloadLink.download = 'vlog.webm';
        downloadLink.style.display = 'inline-block';
        downloadLink.textContent = 'Download your video';
      };

      startBtn.disabled = false;
    } catch (err) {
      alert('Could not access your camera and microphone: ' + err.message);
      startBtn.disabled = true;
      stopBtn.disabled = true;
    }
  }

  startBtn.onclick = () => {
    recordedChunks = [];
    mediaRecorder.start();
    startBtn.disabled = true;
    stopBtn.disabled = false;
    downloadLink.style.display = 'none';
    playback.src = '';
  };

  stopBtn.onclick = () => {
    mediaRecorder.stop();
    startBtn.disabled = false;
    stopBtn.disabled = true;
  };

  initCamera();
</script>

  <script src="script.js"></script>
</body>
</html>